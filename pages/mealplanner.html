<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FoodGenie - Weekly Meal Planner</title>
    <link rel="stylesheet" href="../css/main.css" />
    <meta name="description" content="Interactive meal planning studio with AI-powered suggestions, nutrition tracking, and budget optimization for individuals." />
</head>
<body class="bg-background min-h-screen">
    <!-- Navigation Header -->
    <nav class="bg-surface shadow-soft sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 4c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm-6 8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm12 0c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm-6 6c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-bold text-primary">FoodGenie</h1>
                        <p class="text-xs text-text-secondary">Smart Kitchen Companion</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="homepage.html" class="text-primary font-medium px-3 py-2 rounded-md text-sm">Home</a>
                        <a href="mealplanner.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Meal Planner</a>
                        <a href="smartshopping.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Smart Shopping</a>
                        <a href="recipe_discovery.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Recipes</a>
                        <a href="onboarding.html" class="btn-primary text-sm">Get Started</a>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button type="button" class="text-text-secondary hover:text-primary p-2" onclick="toggleMobileMenu()">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-surface border-t border-neutral-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="homepage.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Home</a>
                <a href="meal_planner.html" class="text-primary block px-3 py-2 rounded-md text-base font-medium">Meal Planner</a>
                <a href="smart_shopping.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Smart Shopping</a>
                <a href="recipe_discovery.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Recipes</a>
                <a href="onboarding.html" class="btn-primary block text-center mx-3 mt-4">Get Started</a>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="bg-gradient-to-br from-primary-50 to-secondary-50 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6">
                <div>
                    <h1 class="text-3xl lg:text-4xl font-bold text-text-primary mb-2">Weekly Meal Planner</h1>
                    <p class="text-lg text-text-secondary">Plan your nutrition with AI-powered suggestions</p>
                </div>
                
                <!-- Quick Stats -->
                <div class="flex flex-wrap gap-4">
                    <div class="bg-white/80 backdrop-blur-sm rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-primary" id="weekly-budget-display">₹0</div>
                        <div class="text-sm text-text-secondary">This Week's Budget</div>
                    </div>
                    <div class="bg-white/80 backdrop-blur-sm rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-secondary" id="nutrition-goals-display">0%</div>
                        <div class="text-sm text-text-secondary">Nutrition Goals</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid lg:grid-cols-4 gap-8">
            <!-- Sidebar Controls -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Week Navigation -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Week Selection</h3>
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="previousWeek()" class="p-2 text-text-secondary hover:text-primary transition-smooth">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <div class="text-center">
                            <div class="font-semibold text-text-primary" id="current-week">Oct 9 - Oct 15, 2025</div>
                            <div class="text-sm text-text-secondary" id="week-number">Week 41</div>
                        </div>
                        <button onclick="nextWeek()" class="p-2 text-text-secondary hover:text-primary transition-smooth">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                    <button class="btn-primary w-full" onclick="generateNewMealPlan()">Generate AI Plan</button>
                </div>

                <!-- Dietary Filters -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Dietary Preferences</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="Vegetarian" checked />
                            <span class="ml-2 text-sm text-text-secondary">Vegetarian</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="Non-Vegetarian" />
                            <span class="ml-2 text-sm text-text-secondary">Non-Vegetarian</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="Vegan" />
                            <span class="ml-2 text-sm text-text-secondary">Vegan</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="Jain" />
                            <span class="ml-2 text-sm text-text-secondary">Jain</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="Keto" />
                            <span class="ml-2 text-sm text-text-secondary">Keto</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="dietary-pref rounded text-primary focus:ring-primary-500" value="High-Protein" />
                            <span class="ml-2 text-sm text-text-secondary">High-Protein</span>
                        </label>
                    </div>
                </div>

                <!-- Cuisine Preferences -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Cuisine Type</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" class="cuisine-pref rounded text-primary focus:ring-primary-500" value="North Indian" checked />
                            <span class="ml-2 text-sm text-text-secondary">North Indian</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="cuisine-pref rounded text-primary focus:ring-primary-500" value="South Indian" />
                            <span class="ml-2 text-sm text-text-secondary">South Indian</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="cuisine-pref rounded text-primary focus:ring-primary-500" value="East Indian" />
                            <span class="ml-2 text-sm text-text-secondary">East Indian</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="cuisine-pref rounded text-primary focus:ring-primary-500" value="West Indian" />
                            <span class="ml-2 text-sm text-text-secondary">West Indian</span>
                        </label>
                    </div>
                </div>

                <!-- Flavor Preferences -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Flavor Preferences</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" class="flavor-pref rounded text-primary focus:ring-primary-500" value="spicy" checked />
                            <span class="ml-2 text-sm text-text-secondary">Spicy</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="flavor-pref rounded text-primary focus:ring-primary-500" value="mild" />
                            <span class="ml-2 text-sm text-text-secondary">Mild</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="flavor-pref rounded text-primary focus:ring-primary-500" value="sweet" />
                            <span class="ml-2 text-sm text-text-secondary">Sweet</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="flavor-pref rounded text-primary focus:ring-primary-500" value="tangy" />
                            <span class="ml-2 text-sm text-text-secondary">Tangy</span>
                        </label>
                    </div>
                </div>

                <!-- Health Goals -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Health Goals</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="radio" name="health-goal" class="health-goal rounded text-primary focus:ring-primary-500" value="weight-loss" />
                            <span class="ml-2 text-sm text-text-secondary">Weight Loss</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="health-goal" class="health-goal rounded text-primary focus:ring-primary-500" value="muscle-gain" />
                            <span class="ml-2 text-sm text-text-secondary">Muscle Gain</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="health-goal" class="health-goal rounded text-primary focus:ring-primary-500" value="balanced" checked />
                            <span class="ml-2 text-sm text-text-secondary">Balanced Diet</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="health-goal" class="health-goal rounded text-primary focus:ring-primary-500" value="diabetic-friendly" />
                            <span class="ml-2 text-sm text-text-secondary">Diabetic Friendly</span>
                        </label>
                    </div>
                </div>

                <!-- Cooking Preferences -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Cooking Time</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">Maximum cooking time per meal</label>
                            <select id="cooking-time-input" class="input-field">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60">60 minutes</option>
                                <option value="90">90 minutes</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">Daily calorie target</label>
                            <input type="number" value="2000" min="1200" max="3500" step="100" class="input-field" id="calorie-target-input" />
                        </div>
                    </div>
                </div>

                <!-- Budget Control -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Budget Settings</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">Weekly Budget</label>
                            <div class="relative">
                                <span class="absolute left-3 top-2 text-text-secondary">₹</span>
                                <input type="number" value="1240" class="input-field pl-8" id="budget-input" />
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">Cost per meal</label>
                            <div class="relative">
                                <span class="absolute left-3 top-2 text-text-secondary">₹</span>
                                <input type="number" value="65" min="25" max="200" class="input-field pl-8" id="cost-per-meal-input" />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button class="w-full text-left p-3 rounded-lg bg-primary-50 text-primary hover:bg-primary-100 transition-smooth">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                </svg>
                                Copy Last Week
                            </div>
                        </button>
                        <button class="w-full text-left p-3 rounded-lg bg-secondary-50 text-secondary hover:bg-secondary-100 transition-smooth">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                </svg>
                                Saved Templates
                            </div>
                        </button>
                        <button class="w-full text-left p-3 rounded-lg bg-accent-50 text-accent hover:bg-accent-100 transition-smooth">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                                </svg>
                                Family Favorites
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Planning Area -->
            <div class="lg:col-span-3">
                <!-- Calendar View -->
                <div class="card p-6 mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-text-primary">Weekly Meal Calendar</h2>
                        <div class="flex items-center space-x-2">
                            <button class="p-2 text-text-secondary hover:text-primary transition-smooth" title="Voice Search">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                                </svg>
                            </button>
                            <button class="btn-secondary text-sm">Save Template</button>
                        </div>
                    </div>

                    <!-- Days Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-7 gap-4">
                        <!-- Monday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Mon</div>
                                <div class="text-sm text-text-secondary">Oct 9</div>
                            </div>
                            
                            <!-- Breakfast Slot -->
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('monday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <!-- Lunch Slot -->
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('monday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <!-- Dinner Slot -->
                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('monday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Tuesday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Tue</div>
                                <div class="text-sm text-text-secondary">Oct 10</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('tuesday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('tuesday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('tuesday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Wednesday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Wed</div>
                                <div class="text-sm text-text-secondary">Oct 11</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('wednesday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('wednesday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('wednesday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Thursday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Thu</div>
                                <div class="text-sm text-text-secondary">Oct 12</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('thursday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('thursday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('thursday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Friday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Fri</div>
                                <div class="text-sm text-text-secondary">Oct 13</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('friday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('friday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('friday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Saturday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Sat</div>
                                <div class="text-sm text-text-secondary">Oct 14</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('saturday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('saturday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('saturday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>

                        <!-- Sunday -->
                        <div class="border border-neutral-200 rounded-lg p-3">
                            <div class="text-center mb-3">
                                <div class="font-semibold text-text-primary">Sun</div>
                                <div class="text-sm text-text-secondary">Oct 15</div>
                            </div>
                            
                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-primary-400 transition-smooth cursor-pointer" onclick="openMealModal('sunday', 'breakfast')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Breakfast</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot mb-3 p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-secondary-400 transition-smooth cursor-pointer" onclick="openMealModal('sunday', 'lunch')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Lunch</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>

                            <div class="meal-slot p-3 bg-neutral-50 rounded-lg border-2 border-dashed border-neutral-200 hover:border-accent-400 transition-smooth cursor-pointer" onclick="openMealModal('sunday', 'dinner')">
                                <div class="text-xs font-medium text-neutral-500 mb-1">Dinner</div>
                                <div class="text-sm text-neutral-400">+ Add Meal</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weekly Summary Cards -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <!-- Nutrition Summary -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Nutrition Summary</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Calories</span>
                                <span class="font-semibold text-text-primary">1,850 / 2,000</span>
                            </div>
                            <div class="w-full bg-neutral-200 rounded-full h-2">
                                <div class="bg-primary h-2 rounded-full" style="width: 92.5%"></div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Protein</span>
                                <span class="font-semibold text-text-primary">65g / 75g</span>
                            </div>
                            <div class="w-full bg-neutral-200 rounded-full h-2">
                                <div class="bg-secondary h-2 rounded-full" style="width: 86.7%"></div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Fiber</span>
                                <span class="font-semibold text-text-primary">28g / 30g</span>
                            </div>
                            <div class="w-full bg-neutral-200 rounded-full h-2">
                                <div class="bg-accent h-2 rounded-full" style="width: 93.3%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Cost Breakdown -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Cost Breakdown</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Planned Meals</span>
                                <span class="font-semibold text-text-primary">₹465</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Remaining Budget</span>
                                <span class="font-semibold text-secondary">₹775</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Avg per meal</span>
                                <span class="font-semibold text-text-primary">₹49</span>
                            </div>
                            <div class="pt-2 border-t border-neutral-200">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-medium text-text-primary">Projected Savings</span>
                                    <span class="font-bold text-secondary">₹320</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Shopping List Preview -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Shopping List</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Rice (1kg)</span>
                                <span class="text-sm font-semibold text-text-primary">₹85</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Dal (500g)</span>
                                <span class="text-sm font-semibold text-text-primary">₹120</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Vegetables</span>
                                <span class="text-sm font-semibold text-text-primary">₹180</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-text-secondary">Paneer (200g)</span>
                                <span class="text-sm font-semibold text-text-primary">₹80</span>
                            </div>
                            <div class="pt-2 border-t border-neutral-200">
                                <a href="smart_shopping.html" class="btn-secondary w-full text-center block">View Full List</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Suggestions -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">AI Recommendations</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-primary-50 rounded-lg p-4">
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center mr-3 mt-1">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-text-primary mb-1">Batch Cooking Opportunity</h4>
                                    <p class="text-sm text-text-secondary">Cook extra dal on Monday for Tuesday's lunch. Save 15 minutes and ₹25.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-secondary-50 rounded-lg p-4">
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center mr-3 mt-1">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-text-primary mb-1">Seasonal Ingredient Alert</h4>
                                    <p class="text-sm text-text-secondary">Spinach is 30% cheaper this week. Perfect for your palak paneer!</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-accent-50 rounded-lg p-4">
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center mr-3 mt-1">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-text-primary mb-1">Budget Optimization</h4>
                                    <p class="text-sm text-text-secondary">Replace paneer with tofu in 2 meals to save ₹60 while maintaining protein.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-warning/10 rounded-lg p-4">
                            <div class="flex items-start">
                                <div class="w-8 h-8 bg-warning rounded-full flex items-center justify-center mr-3 mt-1">
                                    <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-text-primary mb-1">Leftover Optimization</h4>
                                    <p class="text-sm text-text-secondary">Turn Wednesday's leftover rice into Thursday's fried rice breakfast.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Meal Selection Modal -->
    <div id="meal-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-neutral-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-semibold text-text-primary" id="modal-title">Select Meal</h3>
                    <button onclick="closeMealModal()" class="text-text-secondary hover:text-text-primary">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Search Bar -->
                <div class="relative mb-6">
                    <input type="text" placeholder="Search recipes..." class="input-field pl-10" />
                    <svg class="w-5 h-5 text-text-secondary absolute left-3 top-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>

                <!-- Recipe Suggestions -->
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border border-neutral-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition-smooth" onclick="selectMeal('Aloo Paratha', '₹42', '20 mins')">
                        <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?q=80&w=2981&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Aloo Paratha" class="w-full h-32 object-cover rounded-lg mb-3" loading="lazy" onerror="this.src='https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                        <h4 class="font-semibold text-text-primary mb-1">Aloo Paratha</h4>
                        <p class="text-sm text-text-secondary mb-2">Stuffed potato flatbread with yogurt</p>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-primary font-semibold">₹42 per serving</span>
                            <span class="text-text-secondary">20 mins</span>
                        </div>
                    </div>

                    <div class="border border-neutral-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition-smooth" onclick="selectMeal('Masala Dosa', '₹38', '25 mins')">
                        <img src="https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Masala Dosa" class="w-full h-32 object-cover rounded-lg mb-3" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1546833999-b9f581a1996d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                        <h4 class="font-semibold text-text-primary mb-1">Masala Dosa</h4>
                        <p class="text-sm text-text-secondary mb-2">Crispy crepe with spiced potato filling</p>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-primary font-semibold">₹38 per serving</span>
                            <span class="text-text-secondary">25 mins</span>
                        </div>
                    </div>

                    <div class="border border-neutral-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition-smooth" onclick="selectMeal('Rajma Chawal', '₹58', '35 mins')">
                        <img src="https://images.pixabay.com/photo/2017/06/16/11/38/breakfast-2408818_1280.jpg" alt="Rajma Chawal" class="w-full h-32 object-cover rounded-lg mb-3" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                        <h4 class="font-semibold text-text-primary mb-1">Rajma Chawal</h4>
                        <p class="text-sm text-text-secondary mb-2">Kidney bean curry with steamed rice</p>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-primary font-semibold">₹58 per serving</span>
                            <span class="text-text-secondary">35 mins</span>
                        </div>
                    </div>

                    <div class="border border-neutral-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition-smooth" onclick="selectMeal('Chole Bhature', '₹65', '40 mins')">
                        <img src="https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?q=80&w=2946&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Chole Bhature" class="w-full h-32 object-cover rounded-lg mb-3" loading="lazy" onerror="this.src='https://images.pexels.com/photos/1099680/pexels-photo-1099680.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                        <h4 class="font-semibold text-text-primary mb-1">Chole Bhature</h4>
                        <p class="text-sm text-text-secondary mb-2">Spiced chickpeas with fried bread</p>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-primary font-semibold">₹65 per serving</span>
                            <span class="text-text-secondary">40 mins</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-neutral-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- Brand -->
                <div class="md:col-span-1">
                    <div class="flex items-center mb-4">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 4c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm-6 8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm12 0c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm-6 6c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z"/>
                        </svg>
                        <span class="ml-2 text-xl font-bold">FoodGenie</span>
                    </div>
                    <p class="text-neutral-400 text-sm">
                        Smart nutrition, happy families, healthy budgets. Where tradition meets intelligent meal planning.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="homepage.html" class="text-neutral-400 hover:text-white transition-smooth">Home</a></li>
                        <li><a href="meal_planner.html" class="text-neutral-400 hover:text-white transition-smooth">Meal Planner</a></li>
                        <li><a href="smart_shopping.html" class="text-neutral-400 hover:text-white transition-smooth">Smart Shopping</a></li>
                        <li><a href="recipe_discovery.html" class="text-neutral-400 hover:text-white transition-smooth">Recipes</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h3 class="font-semibold mb-4">Support</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Help Center</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Contact Us</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Privacy Policy</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Terms of Service</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div>
                    <h3 class="font-semibold mb-4">Contact</h3>
                    <ul class="space-y-2 text-sm text-neutral-400">
                        <li>support@FoodGenie.in</li>
                        <li>+91 98765 43210</li>
                        <li>Mumbai, Maharashtra</li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-neutral-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-neutral-400">© 2025 FoodGenie. All Rights Reserved.</p>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Current week state
        let currentWeekOffset = 0;
        // Make currentWeekOffset accessible globally
        window.currentWeekOffset = currentWeekOffset;

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Get Monday of the current week (or offset week)
        function getMondayOfWeek(offset = 0) {
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek; // Adjust to get Monday
            const monday = new Date(today);
            monday.setDate(today.getDate() + diff + (offset * 7));
            return monday;
        }
        // Make getMondayOfWeek accessible globally
        window.getMondayOfWeek = getMondayOfWeek;

        // Format date as "Nov 9"
        function formatDate(date) {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return `${months[date.getMonth()]} ${date.getDate()}`;
        }

        // Get week number
        function getWeekNumber(date) {
            const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
            const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
            return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);
        }

        // Update calendar with real dates
        function updateCalendarDates() {
            const monday = getMondayOfWeek(currentWeekOffset);
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const dayLabels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

            // Update week header
            const sunday = new Date(monday);
            sunday.setDate(monday.getDate() + 6);
            document.getElementById('current-week').textContent = 
                `${formatDate(monday)} - ${formatDate(sunday)}, ${monday.getFullYear()}`;
            document.getElementById('week-number').textContent = 
                `Week ${getWeekNumber(monday)}`;

            // Update each day's date
            days.forEach((day, index) => {
                const currentDate = new Date(monday);
                currentDate.setDate(monday.getDate() + index);
                
                // Find all day cards and update their dates
                const dayCards = document.querySelectorAll('.border.border-neutral-200.rounded-lg.p-3');
                if (dayCards[index]) {
                    const dateElement = dayCards[index].querySelector('.text-sm.text-text-secondary');
                    if (dateElement) {
                        dateElement.textContent = formatDate(currentDate);
                    }
                    
                    // Highlight today
                    const today = new Date();
                    if (currentDate.toDateString() === today.toDateString()) {
                        dayCards[index].classList.add('ring-2', 'ring-primary', 'bg-primary-50');
                    } else {
                        dayCards[index].classList.remove('ring-2', 'ring-primary', 'bg-primary-50');
                    }
                }
            });
        }

        // Week navigation
        function previousWeek() {
            currentWeekOffset--;
            window.currentWeekOffset = currentWeekOffset; // Update global reference
            updateCalendarDates();
            // Load meal plan for the new week if available
            if (typeof displayCurrentWeekMealPlan === 'function') {
                displayCurrentWeekMealPlan();
            }
            console.log('Previous week');
        }

        function nextWeek() {
            currentWeekOffset++;
            window.currentWeekOffset = currentWeekOffset; // Update global reference
            updateCalendarDates();
            // Load meal plan for the new week if available
            if (typeof displayCurrentWeekMealPlan === 'function') {
                displayCurrentWeekMealPlan();
            }
            console.log('Next week');
        }

        // Modal functionality
        let currentMealSlot = null;

        function openMealModal(day, mealType) {
            currentMealSlot = { day, mealType };
            document.getElementById('modal-title').textContent = `Select ${mealType.charAt(0).toUpperCase() + mealType.slice(1)} for ${day.charAt(0).toUpperCase() + day.slice(1)}`;
            document.getElementById('meal-modal').classList.remove('hidden');
        }

        function closeMealModal() {
            document.getElementById('meal-modal').classList.add('hidden');
            currentMealSlot = null;
        }

        function selectMeal(name, cost, time) {
            if (currentMealSlot) {
                // Find the meal slot and update it
                const mealSlots = document.querySelectorAll('.meal-slot');
                // This would update the specific slot based on day and meal type
                console.log(`Selected ${name} for ${currentMealSlot.day} ${currentMealSlot.mealType}`);
                closeMealModal();
            }
        }

        // Budget input handler
        document.getElementById('budget-input').addEventListener('input', function(e) {
            const value = e.target.value;
            // Update budget calculations
            console.log('Budget updated to:', value);
        });

        // Close modal when clicking outside
        document.getElementById('meal-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMealModal();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeMealModal();
            }
        });
    </script>
    
    <!-- API Integration Scripts -->
    <script src="api-client.js"></script>
    <script src="meal-planner-integration.js"></script>
    
    <!-- Initialize meal planner -->
    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🌟 FoodGenie Meal Planner loaded');
            // Update calendar with real dates
            updateCalendarDates();
            // Initialize meal planner API
            initializeMealPlanner();
        });
    </script>
</body>
</html>