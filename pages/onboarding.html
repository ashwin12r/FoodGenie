<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to FoodGenie - Smart Personal Nutrition Setup</title>
    <link rel="stylesheet" href="../css/main.css" />
    <meta name="description" content="Set up your personalized nutrition journey with FoodGenie. Configure dietary preferences, budget parameters, and cultural cuisine choices for intelligent meal planning." />
    <style>
        /* Validation styles */
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .input-error {
            border-color: #EF4444 !important;
            border-width: 2px !important;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-background min-h-screen">
    <!-- Navigation Header -->
    <nav class="bg-surface shadow-soft sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 4c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm-6 8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm12 0c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm-6 6c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-bold text-primary">FoodGenie</h1>
                        <p class="text-xs text-text-secondary">Smart Kitchen Companion</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                         <a href="homepage.html" class="text-primary font-medium px-3 py-2 rounded-md text-sm">Home</a>
                        <a href="mealplanner.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Meal Planner</a>
                        <a href="smartshopping.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Smart Shopping</a>
                        <a href="recipe_discovery.html" class="text-text-secondary hover:text-primary px-3 py-2 rounded-md text-sm transition-smooth">Recipes</a>
                        <a href="onboarding.html" class="btn-primary text-sm">Get Started</a>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button type="button" class="text-text-secondary hover:text-primary p-2" onclick="toggleMobileMenu()">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-surface border-t border-neutral-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="homepage.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Home</a>
                <a href="meal_planner.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Meal Planner</a>
                <a href="smart_shopping.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Smart Shopping</a>
                <a href="recipe_discovery.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base transition-smooth">Recipes</a>
                <a href="onboarding.html" class="text-primary block px-3 py-2 rounded-md text-base font-medium">Get Started</a>
            </div>
        </div>
    </nav>

    <!-- Onboarding Container -->
    <div class="min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Progress Header -->
            <div class="text-center mb-8">
                <h1 class="text-3xl lg:text-4xl font-bold text-text-primary mb-4">
                    Welcome to Your <span class="text-gradient-primary">Smart Kitchen Journey</span>
                </h1>
                <p class="text-lg text-text-secondary max-w-2xl mx-auto">
                    Let's personalize FoodGenie for your unique needs, preferences, and budget
                </p>
            </div>

            <!-- Progress Indicator -->
            <div class="mb-8">
                <div class="flex items-center justify-center space-x-4">
                    <div class="flex items-center">
                        <div id="step-1-indicator" class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-sm font-semibold">1</div>
                        <span id="step-1-label" class="ml-2 text-sm font-medium text-primary">Personal Details</span>
                    </div>
                    <div class="w-12 h-0.5 bg-neutral-300" id="progress-1"></div>
                    <div class="flex items-center">
                        <div id="step-2-indicator" class="w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center text-sm font-semibold">2</div>
                        <span id="step-2-label" class="ml-2 text-sm text-neutral-600">Dietary Preferences</span>
                    </div>
                    <div class="w-12 h-0.5 bg-neutral-300" id="progress-2"></div>
                    <div class="flex items-center">
                        <div id="step-3-indicator" class="w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center text-sm font-semibold">3</div>
                        <span id="step-3-label" class="ml-2 text-sm text-neutral-600">Budget & Goals</span>
                    </div>
                    <div class="w-12 h-0.5 bg-neutral-300" id="progress-3"></div>
                    <div class="flex items-center">
                        <div id="step-4-indicator" class="w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center text-sm font-semibold">4</div>
                        <span id="step-4-label" class="ml-2 text-sm text-neutral-600">Complete Setup</span>
                    </div>
                </div>
            </div>

            <!-- Onboarding Form Container -->
            <div class="card max-w-3xl mx-auto p-8">
                <!-- Step 1: Personal Details -->
                <div id="step-1" class="onboarding-step">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-text-primary mb-2">Tell Us About Yourself</h2>
                        <p class="text-text-secondary">Help us understand you to create the perfect meal plans</p>
                    </div>

                    <div class="space-y-6">
                        <!-- Name -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Your Name</label>
                            <input type="text" id="user-name" class="input-field" placeholder="e.g., Rahul Karthik" value />
                        </div>

                        <!-- Location -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">City</label>
                            <select id="city" class="input-field">
                                <option value>Select your city</option>
                                <option value="mumbai">Mumbai</option>
                                <option value="delhi">Delhi</option>
                                <option value="bangalore">Bangalore</option>
                                <option value="hyderabad">Hyderabad</option>
                                <option value="chennai">Chennai</option>
                                <option value="kolkata">Kolkata</option>
                                <option value="pune">Pune</option>
                                <option value="ahmedabad">Ahmedabad</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Dietary Preferences -->
                <div id="step-2" class="onboarding-step hidden">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-secondary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-text-primary mb-2">Your Culinary Preferences</h2>
                        <p class="text-text-secondary">Let's understand your taste preferences and dietary requirements</p>
                    </div>

                    <div class="space-y-8">
                        <!-- Regional Cuisine Preferences -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Preferred Regional Cuisines</label>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="cuisine-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-cuisine="north-indian">
                                    <div class="flex items-center">
                                        <img src="https://images.unsplash.com/photo-1565557623262-b51c2513a641?q=80&w=2971&auto=format&fit=crop&ixlib=rb-4.0.3" alt="North Indian cuisine" class="w-12 h-12 rounded-lg object-cover mr-4" loading="lazy" onerror="this.src='https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                        <div>
                                            <h4 class="font-semibold text-text-primary">North Indian</h4>
                                            <p class="text-sm text-text-secondary">Roti, Dal, Sabzi</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="cuisine-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-cuisine="south-indian">
                                    <div class="flex items-center">
                                        <img src="https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="South Indian cuisine" class="w-12 h-12 rounded-lg object-cover mr-4" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1546833999-b9f581a1996d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                                        <div>
                                            <h4 class="font-semibold text-text-primary">South Indian</h4>
                                            <p class="text-sm text-text-secondary">Rice, Sambar, Rasam</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="cuisine-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-cuisine="gujarati">
                                    <div class="flex items-center">
                                        <img src="https://images.pixabay.com/photo/2017/06/16/11/38/breakfast-2408818_1280.jpg" alt="Gujarati cuisine" class="w-12 h-12 rounded-lg object-cover mr-4" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?q=80&w=2981&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                                        <div>
                                            <h4 class="font-semibold text-text-primary">West Indian</h4>
                                            <p class="text-sm text-text-secondary">Thali, Dhokla, Khichdi</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="cuisine-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-cuisine="bengali">
                                    <div class="flex items-center">
                                        <img src="https://images.unsplash.com/photo-1596797038530-2c107229654b?q=80&w=2835&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Bengali cuisine" class="w-12 h-12 rounded-lg object-cover mr-4" loading="lazy" onerror="this.src='https://images.pexels.com/photos/1099680/pexels-photo-1099680.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                        <div>
                                            <h4 class="font-semibold text-text-primary">East Indian</h4>
                                            <p class="text-sm text-text-secondary">Fish, Rice, Sweets</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dietary Restrictions -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Dietary Restrictions & Preferences</label>
                            <div class="grid md:grid-cols-3 gap-4">
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="vegetarian">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">ü•¨</div>
                                        <h4 class="font-semibold text-text-primary">Vegetarian</h4>
                                        <p class="text-sm text-text-secondary">No meat or fish</p>
                                    </div>
                                </div>
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="vegan">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üå±</div>
                                        <h4 class="font-semibold text-text-primary">Vegan</h4>
                                        <p class="text-sm text-text-secondary">Plant-based only</p>
                                    </div>
                                </div>
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="jain">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üôè</div>
                                        <h4 class="font-semibold text-text-primary">Jain</h4>
                                        <p class="text-sm text-text-secondary">No root vegetables</p>
                                    </div>
                                </div>
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="diabetic">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">ü©∫</div>
                                        <h4 class="font-semibold text-text-primary">Diabetic-Friendly</h4>
                                        <p class="text-sm text-text-secondary">Low sugar & carbs</p>
                                    </div>
                                </div>
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="keto">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">ü•ë</div>
                                        <h4 class="font-semibold text-text-primary">Keto</h4>
                                        <p class="text-sm text-text-secondary">High fat, low carb</p>
                                    </div>
                                </div>
                                <div class="dietary-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-accent hover:bg-accent-50 transition-smooth" data-diet="gluten-free">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üåæ</div>
                                        <h4 class="font-semibold text-text-primary">Gluten-Free</h4>
                                        <p class="text-sm text-text-secondary">No wheat products</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cooking Preferences -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Cooking Preferences</label>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-text-secondary mb-2">Preferred Cooking Time</label>
                                    <select id="cooking-time" class="input-field">
                                        <option value="quick">Quick (15-30 mins)</option>
                                        <option value="moderate">Moderate (30-60 mins)</option>
                                        <option value="elaborate">Elaborate (60+ mins)</option>
                                        <option value="mixed">Mixed preferences</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-text-secondary mb-2">Cooking Complexity</label>
                                    <select id="cooking-complexity" class="input-field">
                                        <option value="simple">Simple (Basic recipes)</option>
                                        <option value="intermediate">Intermediate</option>
                                        <option value="advanced">Advanced (Complex dishes)</option>
                                        <option value="mixed">Mixed complexity</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Budget & Goals -->
                <div id="step-3" class="onboarding-step hidden">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-warning" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-text-primary mb-2">Budget & Health Goals</h2>
                        <p class="text-text-secondary">Set your monthly food budget and health objectives for personalized recommendations</p>
                    </div>

                    <div class="space-y-8">
                        <!-- Monthly Budget -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Monthly Food Budget</label>
                            <div class="bg-neutral-50 p-6 rounded-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <span class="text-sm text-text-secondary">‚Çπ5,000</span>
                                    <span class="text-lg font-bold text-primary" id="budget-display">‚Çπ15,000</span>
                                    <span class="text-sm text-text-secondary">‚Çπ30,000</span>
                                </div>
                                <input type="range" id="budget-slider" class="w-full h-2 bg-neutral-200 rounded-lg appearance-none cursor-pointer" min="5000" max="30000" step="1000" value="15000" />
                                <div class="mt-2 text-center">
                                    <p class="text-sm text-text-secondary">Includes groceries, dining out, and meal delivery</p>
                                </div>
                            </div>
                        </div>

                        <!-- Health Goals -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Primary Health Goals</label>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="goal-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-goal="weight-loss">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-text-primary">Weight Management</h4>
                                            <p class="text-sm text-text-secondary">Healthy weight loss/gain</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="goal-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-goal="muscle-gain">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3.5M3 16.5h18"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-text-primary">Muscle Building</h4>
                                            <p class="text-sm text-text-secondary">High protein nutrition</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="goal-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-goal="energy">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-text-primary">Energy & Vitality</h4>
                                            <p class="text-sm text-text-secondary">Sustained energy levels</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="goal-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-secondary hover:bg-secondary-50 transition-smooth" data-goal="immunity">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-text-primary">Immunity Boost</h4>
                                            <p class="text-sm text-text-secondary">Strengthen immune system</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shopping Preferences -->
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-4">Preferred Shopping Platforms</label>
                            <div class="grid md:grid-cols-3 gap-4">
                                <div class="platform-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-primary hover:bg-primary-50 transition-smooth" data-platform="bigbasket">
                                    <div class="text-center">
                                        <img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3" alt="BigBasket" class="w-12 h-12 rounded-lg object-cover mx-auto mb-2" loading="lazy" onerror="this.src='https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                        <h4 class="font-semibold text-text-primary">BigBasket</h4>
                                        <p class="text-sm text-text-secondary">Wide selection</p>
                                    </div>
                                </div>
                                <div class="platform-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-primary hover:bg-primary-50 transition-smooth" data-platform="instamart">
                                    <div class="text-center">
                                        <img src="https://images.pexels.com/photos/1099680/pexels-photo-1099680.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Instamart" class="w-12 h-12 rounded-lg object-cover mx-auto mb-2" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1551218808-94e220e084d2?q=80&w=2874&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                                        <h4 class="font-semibold text-text-primary">Instamart</h4>
                                        <p class="text-sm text-text-secondary">Quick delivery</p>
                                    </div>
                                </div>
                                <div class="platform-card p-4 border-2 border-neutral-300 rounded-lg cursor-pointer hover:border-primary hover:bg-primary-50 transition-smooth" data-platform="zepto">
                                    <div class="text-center">
                                        <img src="https://images.pixabay.com/photo/2017/06/16/11/38/breakfast-2408818_1280.jpg" alt="Zepto" class="w-12 h-12 rounded-lg object-cover mx-auto mb-2" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?q=80&w=2981&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                                        <h4 class="font-semibold text-text-primary">Zepto</h4>
                                        <p class="text-sm text-text-secondary">10-min delivery</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Complete Setup -->
                <div id="step-4" class="onboarding-step hidden">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-text-primary mb-2">You're All Set!</h2>
                        <p class="text-text-secondary">Your personalized FoodGenie experience is ready. Let's create your first meal plan!</p>
                    </div>

                    <!-- Setup Summary -->
                    <div class="bg-gradient-to-r from-primary-50 to-secondary-50 rounded-xl p-6 mb-8">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Your Profile Summary</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <div class="flex items-center mb-2">
                                    <!--<svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Family Size:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-family-size">4 members</span>-->
                                </div>
                                <div class="flex items-center mb-2">
                                    <svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Cuisine:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-cuisine">North Indian</span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Dietary:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-dietary">Vegetarian</span>
                                </div>
                            </div>
                            <div>
                                <div class="flex items-center mb-2">
                                    <svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Budget:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-budget">‚Çπ15,000/month</span>
                                </div>
                                <div class="flex items-center mb-2">
                                    <svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Goal:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-goal">Weight Management</span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-primary mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Location:</span>
                                    <span class="text-sm text-text-secondary ml-1" id="summary-location">Mumbai</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="card card-hover p-6 text-center">
                            <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <svg class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <h4 class="font-semibold text-text-primary mb-2">Create First Meal Plan</h4>
                            <p class="text-sm text-text-secondary mb-4">Generate your personalized weekly meal plan</p>
                            <a href="meal_planner.html" class="text-primary font-medium text-sm hover:text-primary-700 transition-smooth">Start Planning ‚Üí</a>
                        </div>

                        <div class="card card-hover p-6 text-center">
                            <div class="w-12 h-12 bg-secondary-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <svg class="w-6 h-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                </svg>
                            </div>
                            <h4 class="font-semibold text-text-primary mb-2">Explore Recipes</h4>
                            <p class="text-sm text-text-secondary mb-4">Discover recipes matching your preferences</p>
                            <a href="recipe_discovery.html" class="text-secondary font-medium text-sm hover:text-secondary-700 transition-smooth">Browse Recipes ‚Üí</a>
                        </div>

                        <div class="card card-hover p-6 text-center">
                            <div class="w-12 h-12 bg-accent-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <svg class="w-6 h-6 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 10-4 0v4.01"/>
                                </svg>
                            </div>
                            <h4 class="font-semibold text-text-primary mb-2">Smart Shopping</h4>
                            <p class="text-sm text-text-secondary mb-4">Compare prices and create shopping lists</p>
                            <a href="smart_shopping.html" class="text-accent font-medium text-sm hover:text-accent-700 transition-smooth">Start Shopping ‚Üí</a>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between items-center mt-8 pt-6 border-t border-neutral-200">
                    <button id="prev-btn" class="btn-secondary px-6 py-2 hidden" onclick="previousStep()">
                        ‚Üê Previous
                    </button>
                    <div class="flex-1"></div>
                    <button id="next-btn" class="btn-primary px-6 py-2" onclick="nextStep()">
                        Next ‚Üí
                    </button>
                    <button id="skip-btn" class="text-text-secondary hover:text-primary ml-4 px-4 py-2 transition-smooth" onclick="skipToEnd()">
                        Skip Setup
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-neutral-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- Brand -->
                <div class="md:col-span-1">
                    <div class="flex items-center mb-4">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 4c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm-6 8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm12 0c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm-6 6c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z"/>
                        </svg>
                        <span class="ml-2 text-xl font-bold">FoodGenie</span>
                    </div>
                    <p class="text-neutral-400 text-sm">
                        Smart nutrition, happy families, healthy budgets. Where tradition meets intelligent meal planning.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="homepage.html" class="text-neutral-400 hover:text-white transition-smooth">Home</a></li>
                        <li><a href="meal_planner.html" class="text-neutral-400 hover:text-white transition-smooth">Meal Planner</a></li>
                        <li><a href="smart_shopping.html" class="text-neutral-400 hover:text-white transition-smooth">Smart Shopping</a></li>
                        <li><a href="recipe_discovery.html" class="text-neutral-400 hover:text-white transition-smooth">Recipes</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h3 class="font-semibold mb-4">Support</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Help Center</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Contact Us</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Privacy Policy</a></li>
                        <li><a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">Terms of Service</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div>
                    <h3 class="font-semibold mb-4">Contact</h3>
                    <ul class="space-y-2 text-sm text-neutral-400">
                        <li>support@FoodGenie.in</li>
                        <li>+91 98765 43210</li>
                        <li>Mumbai, Maharashtra</li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-neutral-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-neutral-400">¬© 2025 FoodGenie. All Rights Reserved.</p>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-neutral-400 hover:text-white transition-smooth">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        let formData = {};

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Initialize onboarding
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressIndicator();
            initializeEventListeners();
            updateBudgetDisplay();
        });

        function initializeEventListeners() {
            // Cuisine selection
            document.querySelectorAll('.cuisine-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.cuisine-card').forEach(c => {
                        c.classList.remove('border-secondary', 'bg-secondary-50');
                        c.classList.add('border-neutral-300');
                    });
                    this.classList.remove('border-neutral-300');
                    this.classList.add('border-secondary', 'bg-secondary-50');
                    formData.cuisine = this.dataset.cuisine;
                });
            });

            // Dietary restrictions
            document.querySelectorAll('.dietary-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('border-accent');
                    this.classList.toggle('bg-accent-50');
                    this.classList.toggle('border-neutral-300');
                    
                    if (!formData.dietary) formData.dietary = [];
                    const diet = this.dataset.diet;
                    const index = formData.dietary.indexOf(diet);
                    if (index > -1) {
                        formData.dietary.splice(index, 1);
                    } else {
                        formData.dietary.push(diet);
                    }
                });
            });

            // Health goals
            document.querySelectorAll('.goal-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.goal-card').forEach(c => {
                        c.classList.remove('border-secondary', 'bg-secondary-50');
                        c.classList.add('border-neutral-300');
                    });
                    this.classList.remove('border-neutral-300');
                    this.classList.add('border-secondary', 'bg-secondary-50');
                    formData.healthGoal = this.dataset.goal;
                });
            });

            // Shopping platforms
            document.querySelectorAll('.platform-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('border-primary');
                    this.classList.toggle('bg-primary-50');
                    this.classList.toggle('border-neutral-300');
                    
                    if (!formData.platforms) formData.platforms = [];
                    const platform = this.dataset.platform;
                    const index = formData.platforms.indexOf(platform);
                    if (index > -1) {
                        formData.platforms.splice(index, 1);
                    } else {
                        formData.platforms.push(platform);
                    }
                });
            });

            // Budget slider
            document.getElementById('budget-slider').addEventListener('input', updateBudgetDisplay);
        }

        function updateBudgetDisplay() {
            const slider = document.getElementById('budget-slider');
            const display = document.getElementById('budget-display');
            const value = parseInt(slider.value);
            display.textContent = `‚Çπ${value.toLocaleString('en-IN')}`;
            formData.budget = value;
        }

        function updateProgressIndicator() {
            for (let i = 1; i <= totalSteps; i++) {
                const indicator = document.getElementById(`step-${i}-indicator`);
                const label = document.getElementById(`step-${i}-label`);
                const progress = document.getElementById(`progress-${i}`);
                
                if (i < currentStep) {
                    // Completed step
                    indicator.className = 'w-8 h-8 rounded-full bg-success text-white flex items-center justify-center text-sm font-semibold';
                    indicator.innerHTML = '‚úì';
                    label.className = 'ml-2 text-sm font-medium text-success';
                    if (progress) progress.className = 'w-12 h-0.5 bg-success';
                } else if (i === currentStep) {
                    // Current step
                    indicator.className = 'w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-sm font-semibold';
                    indicator.textContent = i;
                    label.className = 'ml-2 text-sm font-medium text-primary';
                    if (progress) progress.className = 'w-12 h-0.5 bg-neutral-300';
                } else {
                    // Future step
                    indicator.className = 'w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center text-sm font-semibold';
                    indicator.textContent = i;
                    label.className = 'ml-2 text-sm text-neutral-600';
                    if (progress) progress.className = 'w-12 h-0.5 bg-neutral-300';
                }
            }
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.onboarding-step').forEach(s => s.classList.add('hidden'));
            
            // Show current step
            document.getElementById(`step-${step}`).classList.remove('hidden');
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const skipBtn = document.getElementById('skip-btn');
            
            if (step === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }
            
            if (step === totalSteps) {
                nextBtn.textContent = 'Complete Setup';
                skipBtn.classList.add('hidden');
            } else {
                nextBtn.textContent = 'Next ‚Üí';
                skipBtn.classList.remove('hidden');
            }
        }

        /**
         * Validate current step before allowing next
         */
        function validateStep(step) {
            let isValid = true;
            let errorMessage = '';
            let errorElement = null;
            
            switch(step) {
                case 1:
                    // Validate personal details
                    const userNameInput = document.getElementById('user-name');
                    const cityInput = document.getElementById('city');
                    const userName = userNameInput.value.trim();
                    const city = cityInput.value.trim();
                    
                    // Remove previous error states
                    userNameInput.classList.remove('input-error', 'shake');
                    cityInput.classList.remove('input-error', 'shake');
                    
                    if (!userName) {
                        errorMessage = 'Please enter your name';
                        errorElement = userNameInput;
                        isValid = false;
                    } else if (!city) {
                        errorMessage = 'Please select your city';
                        errorElement = cityInput;
                        isValid = false;
                    }
                    break;
                    
                case 2:
                    // Validate preferences
                    if (!formData.cuisine) {
                        errorMessage = 'Please select your preferred cuisine';
                        isValid = false;
                        // Shake cuisine section
                        const cuisineSection = document.querySelectorAll('[data-cuisine]')[0]?.parentElement.parentElement;
                        if (cuisineSection) {
                            cuisineSection.classList.add('shake');
                            setTimeout(() => cuisineSection.classList.remove('shake'), 500);
                        }
                    } else if (!formData.dietary || formData.dietary.length === 0) {
                        errorMessage = 'Please select at least one dietary preference';
                        isValid = false;
                        // Shake dietary section
                        const dietarySection = document.querySelectorAll('[data-dietary]')[0]?.parentElement.parentElement;
                        if (dietarySection) {
                            dietarySection.classList.add('shake');
                            setTimeout(() => dietarySection.classList.remove('shake'), 500);
                        }
                    }
                    break;
                    
                case 3:
                    // Validate cooking preferences
                    const cookingTimeInput = document.getElementById('cooking-time');
                    const cookingComplexityInput = document.getElementById('cooking-complexity');
                    const cookingTime = cookingTimeInput.value;
                    const cookingComplexity = cookingComplexityInput.value;
                    
                    // Remove previous error states
                    cookingTimeInput.classList.remove('input-error', 'shake');
                    cookingComplexityInput.classList.remove('input-error', 'shake');
                    
                    if (!cookingTime) {
                        errorMessage = 'Please select your preferred cooking time';
                        errorElement = cookingTimeInput;
                        isValid = false;
                    } else if (!cookingComplexity) {
                        errorMessage = 'Please select your cooking complexity level';
                        errorElement = cookingComplexityInput;
                        isValid = false;
                    } else if (!formData.healthGoal) {
                        errorMessage = 'Please select your health goal';
                        isValid = false;
                        // Shake health goal section
                        const healthGoalSection = document.querySelectorAll('[data-goal]')[0]?.parentElement.parentElement;
                        if (healthGoalSection) {
                            healthGoalSection.classList.add('shake');
                            setTimeout(() => healthGoalSection.classList.remove('shake'), 500);
                        }
                    } else if (!formData.budget) {
                        errorMessage = 'Please set your weekly budget';
                        isValid = false;
                        // Shake budget section
                        const budgetSection = document.getElementById('budget-slider')?.parentElement;
                        if (budgetSection) {
                            budgetSection.classList.add('shake');
                            setTimeout(() => budgetSection.classList.remove('shake'), 500);
                        }
                    }
                    break;
                    
                case 4:
                    // Final review - no validation needed
                    isValid = true;
                    break;
            }
            
            if (!isValid) {
                showValidationError(errorMessage);
                
                // Highlight and shake error element if it's an input
                if (errorElement) {
                    errorElement.classList.add('input-error', 'shake');
                    errorElement.focus();
                    setTimeout(() => errorElement.classList.remove('shake'), 500);
                }
            }
            
            return isValid;
        }

        /**
         * Show validation error message
         */
        function showValidationError(message) {
            // Create or update error toast
            let errorToast = document.getElementById('validation-error-toast');
            
            if (!errorToast) {
                errorToast = document.createElement('div');
                errorToast.id = 'validation-error-toast';
                errorToast.className = 'fixed top-4 right-4 bg-error text-white px-6 py-4 rounded-lg shadow-lg z-50 animate-fade-in';
                document.body.appendChild(errorToast);
            }
            
            errorToast.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"/>
                    </svg>
                    <span>${message}</span>
                </div>
            `;
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                if (errorToast) {
                    errorToast.remove();
                }
            }, 3000);
        }

        function nextStep() {
            // Validate current step before proceeding
            if (!validateStep(currentStep)) {
                return; // Don't proceed if validation fails
            }
            
            if (currentStep < totalSteps) {
                // Collect current step data
                collectStepData(currentStep);
                
                currentStep++;
                updateProgressIndicator();
                showStep(currentStep);
                
                if (currentStep === totalSteps) {
                    updateSummary();
                }
            } else {
                // Complete setup
                completeSetup();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressIndicator();
                showStep(currentStep);
            }
        }

        function skipToEnd() {
            // Validate that at least Step 1 (basic info) is filled
            if (currentStep === 1) {
                const userName = document.getElementById('user-name').value.trim();
                const city = document.getElementById('city').value.trim();
                
                if (!userName || !city) {
                    showValidationError('Please fill in your basic details before skipping');
                    return;
                }
            }
            
            // Collect current step data before skipping
            collectStepData(currentStep);
            
            // Set default values for skipped steps
            setDefaultValues();
            currentStep = totalSteps;
            updateProgressIndicator();
            showStep(currentStep);
            updateSummary();
        }

        function collectStepData(step) {
            switch(step) {
                case 1:
                    formData.userName = document.getElementById('user-name').value || 'User';
                    formData.city = document.getElementById('city').value || 'mumbai';
                    break;
                case 2:
                    formData.cookingTime = document.getElementById('cooking-time').value || 'moderate';
                    formData.cookingComplexity = document.getElementById('cooking-complexity').value || 'intermediate';
                    break;
                case 3:
                    // Budget and goals already collected via event listeners
                    break;
            }
        }

        function setDefaultValues() {
            formData = {
                userName: 'User',
                city: 'mumbai',
                cuisine: 'north-indian',
                dietary: ['vegetarian'],
                cookingTime: 'moderate',
                cookingComplexity: 'intermediate',
                budget: 15000,
                healthGoal: 'weight-loss',
                platforms: ['bigbasket', 'instamart']
            };
        }

        function updateSummary() {
            document.getElementById('summary-cuisine').textContent = getCuisineLabel(formData.cuisine);
            document.getElementById('summary-dietary').textContent = getDietaryLabel(formData.dietary);
            document.getElementById('summary-budget').textContent = `‚Çπ${(formData.budget || 15000).toLocaleString('en-IN')}/week`;
            document.getElementById('summary-goal').textContent = getGoalLabel(formData.healthGoal);
            document.getElementById('summary-location').textContent = getCityLabel(formData.city);
        }

        function getCuisineLabel(cuisine) {
            const labels = {
                'north-indian': 'North Indian',
                'south-indian': 'South Indian',
                'gujarati': 'Gujarati',
                'bengali': 'Bengali'
            };
            return labels[cuisine] || 'Mixed';
        }

        function getDietaryLabel(dietary) {
            if (!dietary || dietary.length === 0) return 'No restrictions';
            return dietary.map(d => d.charAt(0).toUpperCase() + d.slice(1)).join(', ');
        }

        function getGoalLabel(goal) {
            const labels = {
                'weight-loss': 'Weight Management',
                'muscle-gain': 'Muscle Building',
                'energy': 'Energy & Vitality',
                'immunity': 'Immunity Boost'
            };
            return labels[goal] || 'General Health';
        }

        function getCityLabel(city) {
            const labels = {
                'mumbai': 'Mumbai',
                'delhi': 'Delhi',
                'bangalore': 'Bangalore',
                'hyderabad': 'Hyderabad',
                'chennai': 'Chennai',
                'kolkata': 'Kolkata',
                'pune': 'Pune',
                'ahmedabad': 'Ahmedabad'
            };
            return labels[city] || 'Other';
        }

        function completeSetup() {
            // Save data to localStorage (in a real app, this would go to a server)
            localStorage.setItem('FoodGenie-profile', JSON.stringify(formData));
            
            // Show success message and redirect
            alert('Welcome to Food Genie! Your profile has been created successfully.');
            window.location.href = 'meal_planner.html';
        }

        // Initialize the first step
        showStep(1);
    </script>

    <!-- API Integration Scripts -->
    <script src="api-client.js"></script>
    <script src="onboarding-integration.js"></script>
</body>
</html>